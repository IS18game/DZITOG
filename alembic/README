# Описание директории alembic

Эта директория содержит файлы конфигурации и миграций для Alembic. Alembic — это инструмент для управления миграциями схем баз данных, который позволяет эволюционировать схему базы данных согласованным и управляемым образом.

## Содержание директории

*   `alembic.ini`: Основной файл конфигурации Alembic. Содержит настройки подключения к базе данных, пути к директории с миграциями и другие параметры.
*   `env.py`: Скрипт, который используется Alembic для настройки окружения перед выполнением миграций. В этом скрипте определяется подключение к базе данных, указывается модель SQLAlchemy и настраивается логирование.
*   `versions/`: Директория, содержащая скрипты миграций. Каждый скрипт миграции представляет собой набор операций для изменения схемы базы данных (например, создание таблицы, добавление столбца и т.д.).

## Использование Alembic

1.  **Настройка `alembic.ini`:**
    *   Укажите параметры подключения к вашей базе данных в секции `[alembic]`.
    *   Настройте путь к директории `versions` (обычно не требуется изменять).

2.  **Настройка `env.py`:**
    *   Убедитесь, что импортирована ваша модель SQLAlchemy (обычно достаточно добавить `from your_project import models`).
    *   Укажите `target_metadata = models.Base.metadata`, где `models.Base` — ваш базовый класс для моделей SQLAlchemy.

3.  **Создание миграции:**

    `alembic revision -m "Описание миграции"`

    Эта команда создаст новый скрипт миграции в директории `versions/`. Описание миграции должно быть кратким и понятным.

4.  **Редактирование миграции:**
    *   Отредактируйте созданный скрипт миграции. В функциях `upgrade()` и `downgrade()` укажите операции для изменения схемы базы данных.
    *   Используйте команды `op` из `alembic.op` для выполнения операций (например, `op.create_table()`, `op.add_column()`).

5.  **Применение миграций:**

    `alembic upgrade head`

    Эта команда применит все доступные миграции к базе данных.

6.  **Откат миграций:**

    `alembic downgrade -1`

    Эта команда откатит последнюю примененную миграцию.

## Важные замечания

*   Перед применением миграций всегда делайте резервную копию базы данных.
*   Тщательно тестируйте миграции перед применением на production-сервере.
*   Следите за порядком выполнения миграций.
*   Используйте понятные описания для миграций.

Этот README предоставляет базовое понимание структуры директории `alembic` и основных шагов использования Alembic. Для получения более подробной информации обратитесь к документации Alembic: [https://alembic.sqlalchemy.org/en/latest/](https://alembic.sqlalchemy.org/en/latest/)